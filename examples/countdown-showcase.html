<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Component Showcase - DRY2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@2.0.4" integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+" crossorigin="anonymous"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="../dist/dry2.js"></script>
    
    
    <!-- Common CSS for showcase pages -->
    <link rel="stylesheet" href="static/css/base.css">
</head>
<body class="bg-gray-50">
    <!-- Include Navigation -->
    <div id="navigation" hx-get="nav.inc.html" hx-trigger="load"></div>
    
    <!-- Breadcrumbs -->
    <div class="bg-white border-b">
        <div class="max-w-6xl mx-auto px-4 xl:px-0 py-4">
            <dry-breadcrumbs>
                <breadcrumb-item href="../index.html">Home</breadcrumb-item>
                <breadcrumb-item href="./index.html">Examples</breadcrumb-item>
                <breadcrumb-item active>Countdown Component</breadcrumb-item>
            </dry-breadcrumbs>
        </div>
    </div>

<div class="p-8">
    <div class="max-w-6xl mx-auto">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">Countdown Component</h1>
            <p class="text-lg text-gray-600">A countdown component that displays time remaining until a specific date/time with flexible formatting options.</p>
        </header>
        
        <main>
            <!-- Basic Countdown Section -->
            <section class="demo-section">
                <h2 class="demo-title">Basic Countdown</h2>
                <p class="demo-description">A simple countdown timer with a fixed duration.</p>
                
                <div class="demo-container">
                    <dry-countdown 
                        duration="60" 
                        autostart 
                        leading-zeros
                        expiry-text="Time's up!">
                    </dry-countdown>
                    
                    <div class="mt-4 flex gap-2">
                        <button id="basic-pause" class="px-3 py-1 bg-blue-500 text-white rounded">Pause</button>
                        <button id="basic-resume" class="px-3 py-1 bg-blue-500 text-white rounded">Resume</button>
                        <button id="basic-reset" class="px-3 py-1 bg-blue-500 text-white rounded">Reset</button>
                    </div>
                </div>
                
                <dry-code language="HTML">&lt;dry-countdown 
    duration="60" 
    autostart 
    leading-zeros
    expiry-text="Time's up!"&gt;
&lt;/dry-countdown&gt;</dry-code>
            </section>
            
            <!-- Target Date Countdown -->
            <section class="demo-section">
                <h2 class="demo-title">Target Date Countdown</h2>
                <p class="demo-description">Countdown to a specific future date and time.</p>
                
                <div class="demo-container">
                    <div class="mb-4">
                        <label for="target-date-input" class="block mb-2 font-medium">Set Target Date:</label>
                        <input 
                            type="datetime-local" 
                            id="target-date-input" 
                            class="px-3 py-2 border rounded"
                            value="2025-12-31T23:59:59">
                        <button id="set-target-date" class="ml-2 px-3 py-2 bg-blue-500 text-white rounded">Set Date</button>
                    </div>
                    
                    <dry-countdown 
                        id="target-date-countdown"
                        target-date="2025-12-31T23:59:59" 
                        autostart 
                        leading-zeros
                        show-zeros
                        class="text-center">
                    </dry-countdown>
                </div>
                
                <dry-code language="HTML">&lt;dry-countdown 
    target-date="2025-12-31T23:59:59" 
    autostart 
    leading-zeros
    show-zeros
    class="text-center"&gt;
&lt;/dry-countdown&gt;</dry-code>
            </section>
            
            <!-- Custom Format Countdown -->
            <section class="demo-section">
                <h2 class="demo-title">Custom Format Countdown</h2>
                <p class="demo-description">Customize which time units are displayed in the countdown.</p>
                
                <div class="demo-container">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="font-medium mb-2">Days & Hours Only</h3>
                            <dry-countdown 
                                duration="172800" 
                                format="days,hours" 
                                autostart 
                                leading-zeros>
                            </dry-countdown>
                        </div>
                        
                        <div>
                            <h3 class="font-medium mb-2">Minutes & Seconds Only</h3>
                            <dry-countdown 
                                duration="3600" 
                                format="minutes,seconds" 
                                autostart 
                                leading-zeros>
                            </dry-countdown>
                        </div>
                    </div>
                </div>
                
                <dry-code language="HTML">&lt;!-- Days & Hours Only --&gt;
&lt;dry-countdown 
    duration="172800" 
    format="days,hours" 
    autostart 
    leading-zeros&gt;
&lt;/dry-countdown&gt;

&lt;!-- Minutes & Seconds Only --&gt;
&lt;dry-countdown 
    duration="3600" 
    format="minutes,seconds" 
    autostart 
    leading-zeros&gt;
&lt;/dry-countdown&gt;</dry-code>
            </section>
            
            <!-- Custom Labels Countdown -->
            <section class="demo-section">
                <h2 class="demo-title">Custom Unit Labels</h2>
                <p class="demo-description">Customize the labels for time units with support for singular/plural forms.</p>
                
                <div class="demo-container">
                    <dry-countdown 
                        duration="90061" 
                        autostart 
                        leading-zeros
                        days-label="Day|Days"
                        hours-label="Hr|Hrs"
                        minutes-label="Min|Mins"
                        seconds-label="Sec|Secs">
                    </dry-countdown>
                </div>
                
                <dry-code language="HTML">&lt;dry-countdown 
    duration="90061" 
    autostart 
    leading-zeros
    days-label="Day|Days"
    hours-label="Hr|Hrs"
    minutes-label="Min|Mins"
    seconds-label="Sec|Secs"&gt;
&lt;/dry-countdown&gt;</dry-code>
            </section>
            
            <!-- Styled Countdown -->
            <section class="demo-section">
                <h2 class="demo-title">Styled Countdown</h2>
                <p class="demo-description">Customize the appearance of the countdown timer.</p>
                
                <div class="demo-container">
                    <dry-countdown 
                        duration="3600" 
                        autostart 
                        leading-zeros
                        class="flex justify-center p-4 bg-blue-100 rounded-lg"
                        unit-class="mx-4 bg-white p-4 rounded-lg shadow-md w-24 flex flex-col items-center">
                    </dry-countdown>
                </div>
                
                <dry-code language="HTML">&lt;dry-countdown 
    duration="3600" 
    autostart 
    leading-zeros
    class="flex justify-center p-4 bg-blue-100 rounded-lg"
    unit-class="mx-4 bg-white p-4 rounded-lg shadow-md w-24 flex flex-col items-center"&gt;
&lt;/dry-countdown&gt;</dry-code>
            </section>
            
            <!-- Expired Content Section -->
            <section class="demo-section">
                <h2 class="demo-title">Custom Expired Content</h2>
                <p class="demo-description">Display custom content when the countdown expires.</p>
                
                <div class="demo-container">
                    <div class="mb-4">
                        <dry-countdown 
                            id="expire-countdown"
                            duration="5" 
                            autostart 
                            leading-zeros>
                            <div slot="expired" class="bg-red-100 text-red-700 p-4 rounded-lg text-center">
                                <p class="text-xl font-bold">Time's Up!</p>
                                <p>Your countdown has expired.</p>
                                <button id="restart-expire" class="mt-2 px-3 py-1 bg-red-500 text-white rounded">Restart</button>
                            </div>
                        </dry-countdown>
                    </div>
                </div>
                
                <dry-code language="HTML">&lt;dry-countdown 
    duration="5" 
    autostart 
    leading-zeros&gt;
    &lt;div slot="expired" class="bg-red-100 text-red-700 p-4 rounded-lg text-center"&gt;
        &lt;p class="text-xl font-bold"&gt;Time's Up!&lt;/p&gt;
        &lt;p&gt;Your countdown has expired.&lt;/p&gt;
        &lt;button id="restart-expire" class="mt-2 px-3 py-1 bg-red-500 text-white rounded"&gt;Restart&lt;/button&gt;
    &lt;/div&gt;
&lt;/dry-countdown&gt;</dry-code>
            </section>
            
            <!-- Event Handling Section -->
            <section class="demo-section">
                <h2 class="demo-title">Event Handling</h2>
                <p class="demo-description">The countdown component emits events for different states.</p>
                
                <div class="demo-container">
                    <dry-countdown 
                        id="event-countdown"
                        duration="10" 
                        autostart 
                        leading-zeros
                        format="seconds">
                    </dry-countdown>
                    
                    <div class="mt-4 flex gap-2">
                        <button id="event-pause" class="px-3 py-1 bg-blue-500 text-white rounded">Pause</button>
                        <button id="event-resume" class="px-3 py-1 bg-blue-500 text-white rounded">Resume</button>
                        <button id="event-reset" class="px-3 py-1 bg-blue-500 text-white rounded">Reset</button>
                    </div>
                    
                    <div class="mt-4 p-3 bg-gray-100 rounded">
                        <p class="text-sm font-medium">Event Log:</p>
                        <pre id="event-log" class="text-sm mt-2">No events yet. Interact with the countdown above to see events.</pre>
                    </div>
                </div>
                
                <dry-code language="JavaScript">&lt;dry-countdown 
    id="event-countdown"
    duration="10" 
    autostart 
    leading-zeros
    format="seconds"&gt;
&lt;/dry-countdown&gt;

&lt;script&gt;
    document.addEventListener('countdown:completed', (e) => {
        console.log('Countdown completed');
        document.getElementById('event-log').textContent = 
            `Countdown completed at ${new Date().toLocaleTimeString()}`;
    });
    
    document.addEventListener('countdown:paused', (e) => {
        console.log('Countdown paused');
        document.getElementById('event-log').textContent = 
            `Countdown paused at ${new Date().toLocaleTimeString()}`;
    });
    
    // ... more event handlers
&lt;/script&gt;</dry-code>
            </section>
            
            <!-- API Reference -->
            <section class="demo-section">
                <h2 class="demo-title">API Reference</h2>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Countdown Properties</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full border border-gray-300 rounded">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left">Property</th>
                                <th class="px-4 py-2 text-left">Type</th>
                                <th class="px-4 py-2 text-left">Default</th>
                                <th class="px-4 py-2 text-left">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">target-date</td>
                                <td class="px-4 py-2">string</td>
                                <td class="px-4 py-2">undefined</td>
                                <td class="px-4 py-2">ISO date string for the target date/time</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">duration</td>
                                <td class="px-4 py-2">number</td>
                                <td class="px-4 py-2">undefined</td>
                                <td class="px-4 py-2">Duration in seconds for the countdown</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">format</td>
                                <td class="px-4 py-2">string</td>
                                <td class="px-4 py-2">'days,hours,minutes,seconds'</td>
                                <td class="px-4 py-2">Comma-separated list of time units to display</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">autostart</td>
                                <td class="px-4 py-2">boolean</td>
                                <td class="px-4 py-2">false</td>
                                <td class="px-4 py-2">Whether to start the countdown automatically</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">leading-zeros</td>
                                <td class="px-4 py-2">boolean</td>
                                <td class="px-4 py-2">false</td>
                                <td class="px-4 py-2">Whether to display leading zeros for values</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">show-zeros</td>
                                <td class="px-4 py-2">boolean</td>
                                <td class="px-4 py-2">false</td>
                                <td class="px-4 py-2">Whether to show zero values for units</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Countdown Methods</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full border border-gray-300 rounded">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left">Method</th>
                                <th class="px-4 py-2 text-left">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">startCountdown()</td>
                                <td class="px-4 py-2">Starts the countdown</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">pause()</td>
                                <td class="px-4 py-2">Pauses the countdown</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">resume()</td>
                                <td class="px-4 py-2">Resumes a paused countdown</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">reset()</td>
                                <td class="px-4 py-2">Resets the countdown to its initial state</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <h3 class="text-xl font-semibold mt-6 mb-3">Countdown Events</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full border border-gray-300 rounded">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="px-4 py-2 text-left">Event</th>
                                <th class="px-4 py-2 text-left">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">countdown:completed</td>
                                <td class="px-4 py-2">Fired when the countdown reaches zero</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">countdown:paused</td>
                                <td class="px-4 py-2">Fired when the countdown is paused</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">countdown:resumed</td>
                                <td class="px-4 py-2">Fired when the countdown is resumed</td>
                            </tr>
                            <tr class="border-t">
                                <td class="px-4 py-2 font-medium">countdown:reset</td>
                                <td class="px-4 py-2">Fired when the countdown is reset</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            
            <!-- Component Builder Section -->
            <div id="countdown-component-builder"></div>
        </main>
    </div>
    
    <script>
        // Basic countdown controls
        document.getElementById('basic-pause').addEventListener('click', () => {
            const countdown = document.querySelector('dry-countdown');
            countdown.pause();
        });
        
        document.getElementById('basic-resume').addEventListener('click', () => {
            const countdown = document.querySelector('dry-countdown');
            countdown.resume();
        });
        
        document.getElementById('basic-reset').addEventListener('click', () => {
            const countdown = document.querySelector('dry-countdown');
            countdown.reset();
        });
        
        // Target date countdown
        document.getElementById('set-target-date').addEventListener('click', () => {
            const dateInput = document.getElementById('target-date-input').value;
            const targetCountdown = document.getElementById('target-date-countdown');
            targetCountdown.targetDate = dateInput;
            targetCountdown.reset();
        });
        
        // Expired countdown restart
        document.getElementById('restart-expire').addEventListener('click', () => {
            const countdown = document.getElementById('expire-countdown');
            countdown.reset();
        });
        
        // Event countdown controls
        document.getElementById('event-pause').addEventListener('click', () => {
            document.getElementById('event-countdown').pause();
        });
        
        document.getElementById('event-resume').addEventListener('click', () => {
            document.getElementById('event-countdown').resume();
        });
        
        document.getElementById('event-reset').addEventListener('click', () => {
            document.getElementById('event-countdown').reset();
        });
        
        // Event logging
        const eventLog = document.getElementById('event-log');
        
        document.addEventListener('countdown:completed', (e) => {
            eventLog.textContent = `Countdown completed at ${new Date().toLocaleTimeString()}`;
        });
        
        document.addEventListener('countdown:paused', (e) => {
            eventLog.textContent = `Countdown paused at ${new Date().toLocaleTimeString()}`;
        });
        
        document.addEventListener('countdown:resumed', (e) => {
            eventLog.textContent = `Countdown resumed at ${new Date().toLocaleTimeString()}`;
        });
        
        document.addEventListener('countdown:reset', (e) => {
            eventLog.textContent = `Countdown reset at ${new Date().toLocaleTimeString()}`;
        });
        
        // Initialize Component Builder
        document.addEventListener('DOMContentLoaded', function() {
            new ComponentBuilder({
                elementId: 'countdown-component-builder',
                componentTag: 'dry-countdown',
                title: 'Component Builder',
                description: 'Customize countdown properties and see live preview.',
                
                properties: {
                    'countdown-type': {
                        type: 'select',
                        label: 'Countdown Type',
                        options: [
                            { value: 'duration', label: 'Duration' },
                            { value: 'target-date', label: 'Target Date' }
                        ],
                        default: 'duration'
                    },
                    duration: {
                        type: 'range',
                        label: 'Duration (seconds)',
                        min: 1,
                        max: 86400,
                        default: 60,
                        displayFormat: (value) => `${value} seconds`
                    },
                    'target-date': {
                        type: 'text',
                        label: 'Target Date (ISO)',
                        default: '2025-12-31T23:59:59'
                    },
                    format: {
                        type: 'select',
                        label: 'Time Format',
                        options: [
                            { value: 'days,hours,minutes,seconds', label: 'All Units' },
                            { value: 'days,hours', label: 'Days & Hours' },
                            { value: 'hours,minutes', label: 'Hours & Minutes' },
                            { value: 'minutes,seconds', label: 'Minutes & Seconds' },
                            { value: 'seconds', label: 'Seconds Only' }
                        ],
                        default: 'days,hours,minutes,seconds'
                    },
                    autostart: {
                        type: 'checkbox',
                        label: 'Auto Start',
                        default: true
                    },
                    'leading-zeros': {
                        type: 'checkbox',
                        label: 'Leading Zeros',
                        default: true
                    },
                    'show-zeros': {
                        type: 'checkbox',
                        label: 'Show Zero Values',
                        default: false
                    },
                    'expiry-text': {
                        type: 'text',
                        label: 'Expiry Text',
                        default: "Time's up!"
                    }
                },
                
                defaults: {
                    'countdown-type': 'duration',
                    duration: 60,
                    'target-date': '2025-12-31T23:59:59',
                    format: 'days,hours,minutes,seconds',
                    autostart: true,
                    'leading-zeros': true,
                    'show-zeros': false,
                    'expiry-text': "Time's up!"
                },
                
                contentGenerator: function(values) {
                    // For countdown, we don't need content
                    return '';
                },
                
                codeGenerator: function(values, config) {
                    const attributes = Object.entries(values)
                        .filter(([key, value]) => {
                            // Skip countdown-type as it's just for the builder
                            if (key === 'countdown-type') return false;
                            
                            // Only include target-date or duration based on type
                            if (key === 'target-date' && values['countdown-type'] === 'duration') return false;
                            if (key === 'duration' && values['countdown-type'] === 'target-date') return false;
                            
                            const propConfig = config.properties[key];
                            return value !== propConfig.default && value !== false && value !== '';
                        })
                        .map(([key, value]) => `${key}="${value}"`)
                        .join(' ');
                    
                    return `<dry-countdown${attributes ? ' ' + attributes : ''}></dry-countdown>`;
                },
                
                previewWrapper: function(componentHTML) {
                    return `
                    <div class="flex flex-col items-center component-builder-preview">
                        ${componentHTML}
                        <div class="mt-4 flex gap-2">
                            <button class="px-3 py-1 bg-blue-500 text-white rounded" onclick="this.closest('.component-builder-preview').querySelector('dry-countdown').pause()">Pause</button>
                            <button class="px-3 py-1 bg-blue-500 text-white rounded" onclick="this.closest('.component-builder-preview').querySelector('dry-countdown').resume()">Resume</button>
                            <button class="px-3 py-1 bg-blue-500 text-white rounded" onclick="this.closest('.component-builder-preview').querySelector('dry-countdown').reset()">Reset</button>
                        </div>
                    </div>`;
                }
            });
        });
    </script>
</div>

<div id="footer" hx-get="footer.inc.html" hx-trigger="load"></div>
</body>
</html>